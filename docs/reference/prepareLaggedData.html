<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Organizes time series data into lags. — prepareLaggedData • memoria</title><script src="../deps/jquery-3.6.1/jquery-3.6.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Organizes time series data into lags. — prepareLaggedData"><meta name="description" content="Takes a multivariate time series, where at least one variable is meant to be used as a response while the others are meant to be used as predictors in a model, and organizes it in time lags, generating one new column per lag and variable in the model."><meta property="og:description" content="Takes a multivariate time series, where at least one variable is meant to be used as a response while the others are meant to be used as predictors in a model, and organizes it in time lags, generating one new column per lag and variable in the model."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">memoria</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/quick_start.html">Quick Start Guide</a></li>
    <li><a class="dropdown-item" href="../articles/using_memoria.html">Understanding Ecological Memory Analysis</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Organizes time series data into lags.</h1>

      <div class="d-none name"><code>prepareLaggedData.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Takes a multivariate time series, where at least one variable is meant to be used as a response while the others are meant to be used as predictors in a model, and organizes it in time lags, generating one new column per lag and variable in the model.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepareLaggedData</span><span class="op">(</span></span>
<span>  input.data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  response <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  drivers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  oldest.sample <span class="op">=</span> <span class="st">"first"</span>,</span>
<span>  lags <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time.zoom <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-input-data">input.data<a class="anchor" aria-label="anchor" href="#arg-input-data"></a></dt>
<dd><p>a dataframe with one time series per column.</p></dd>


<dt id="arg-response">response<a class="anchor" aria-label="anchor" href="#arg-response"></a></dt>
<dd><p>character string, name of the numeric column to be used as response in the model.</p></dd>


<dt id="arg-drivers">drivers<a class="anchor" aria-label="anchor" href="#arg-drivers"></a></dt>
<dd><p>character vector, names of the numeric columns to be used as predictors in the model.</p></dd>


<dt id="arg-time">time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p>character vector, name of the numeric column with the time/age.</p></dd>


<dt id="arg-oldest-sample">oldest.sample<a class="anchor" aria-label="anchor" href="#arg-oldest-sample"></a></dt>
<dd><p>character string, either "first" or "last". When "first", the first row taken as the oldest case of the time series and the last row is taken as the newest case, so ecological memory flows from the first to the last row of <code>input.data</code>. When "last", the last row is taken as the oldest sample, and this is the mode that should be used when <code>input.data</code> represents a palaeoecological dataset. Default behavior is "first".</p></dd>


<dt id="arg-lags">lags<a class="anchor" aria-label="anchor" href="#arg-lags"></a></dt>
<dd><p>numeric vector, lags to be used in the equation, in the same units as <code>time</code>. The use of <code><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></code> to define it is highly recommended. If 0 is absent from lags, it is added automatically to allow the consideration of a concurrent effect. Lags should be aligned to the temporal resolution of the data. For example, if the interval between consecutive samples is 100 years, lags should be something like <code>0, 100, 200, 300</code>. Lags can also be multiples of the time resolution, such as <code>0, 200, 400, 600</code> (when time resolution is 100 years).</p></dd>


<dt id="arg-time-zoom">time.zoom<a class="anchor" aria-label="anchor" href="#arg-time-zoom"></a></dt>
<dd><p>numeric vector of two values from the range of the <code>time</code> column, used to subset the data if desired.</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>boolean, if TRUE, applies the <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></code> function to normalize the data. Required if the lagged data is going to be used to fit linear models.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A dataframe with columns representing time-delayed values of the drivers and the response. Column names have the lag number as a suffix. The response variable is identified in the output as "Response_0".</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function interprets the <code>time</code> column as an index representing the temporal position of each sample. It uses the <code>lag</code> function from the <span class="pkg">zoo</span> package to shift columns by the specified lags, generating one new column per lag and variable.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="computeMemory.html">computeMemory</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Blas M. Benito  &lt;blasbenito@gmail.com&gt;</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#loading data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">palaeodata</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#adding lags</span></span></span>
<span class="r-in"><span><span class="va">lagged.data</span> <span class="op">&lt;-</span> <span class="fu">prepareLaggedData</span><span class="op">(</span></span></span>
<span class="r-in"><span> input.data <span class="op">=</span> <span class="va">palaeodata</span>,</span></span>
<span class="r-in"><span> response <span class="op">=</span> <span class="st">"pollen.pinus"</span>,</span></span>
<span class="r-in"><span> drivers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"climate.temperatureAverage"</span>, <span class="st">"climate.rainfallAverage"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> time <span class="op">=</span> <span class="st">"age"</span>,</span></span>
<span class="r-in"><span> oldest.sample <span class="op">=</span> <span class="st">"last"</span>,</span></span>
<span class="r-in"><span> lags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">1</span>, by<span class="op">=</span><span class="fl">0.2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> time.zoom<span class="op">=</span><span class="cn">NULL</span>,</span></span>
<span class="r-in"><span> scale<span class="op">=</span><span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">lagged.data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	3988 obs. of  19 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ Response_0                    : num  0 2.5 6.97 10.64 13.39 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ Response_0.2                  : num  2.5 6.97 10.64 13.39 15.02 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ Response_0.4                  : num  6.97 10.64 13.39 15.02 15.62 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ Response_0.6                  : num  10.6 13.4 15 15.6 14.5 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ Response_0.8                  : num  13.4 15 15.6 14.5 10.9 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ Response_1                    : num  15 15.6 14.5 10.9 6 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ climate.temperatureAverage_0  : num  14.1 14.1 14 14 14 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ climate.temperatureAverage_0.2: num  14.1 14 14 14 14 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ climate.temperatureAverage_0.4: num  14 14 14 14 14 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ climate.temperatureAverage_0.6: num  14 14 14 14 14 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ climate.temperatureAverage_0.8: num  14 14 14 14 14 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ climate.temperatureAverage_1  : num  14 14 14 14 14 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ climate.rainfallAverage_0     : num  1.57 1.57 1.57 1.57 1.57 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ climate.rainfallAverage_0.2   : num  1.57 1.57 1.57 1.57 1.57 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ climate.rainfallAverage_0.4   : num  1.57 1.57 1.57 1.57 1.57 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ climate.rainfallAverage_0.6   : num  1.57 1.57 1.57 1.57 1.57 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ climate.rainfallAverage_0.8   : num  1.57 1.57 1.57 1.57 1.56 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ climate.rainfallAverage_1     : num  1.57 1.57 1.57 1.56 1.56 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ time                          : num  0.5 0.7 0.9 1.1 1.3 1.5 1.7 1.9 2.1 2.3 ...</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Blas M. Benito.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

