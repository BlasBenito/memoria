<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>memoria and virtualPollen • memoria</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="memoria and virtualPollen">
<link rel="stylesheet" href="extra.css">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">memoria</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/memoria_and_virtualPollen.html">memoria and virtualPollen</a></li>
    <li><a class="dropdown-item" href="../articles/download_history.html">Download History</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>memoria and virtualPollen</h1>
            
      

      <div class="d-none name"><code>memoria_and_virtualPollen.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <a href="https://github.com/BlasBenito/virtualPollen" class="external-link">virtualPollen</a>
package generates synthetic pollen abundance curves by simulating
virtual taxa with configurable life-history traits (maximum age,
fecundity) and niche characteristics (optimum, breadth). Combined with
memoria, this creates a powerful framework for systematically exploring
how species traits modulate ecological memory patterns.</p>
<p>This article demonstrates how to run batch memory analyses across
multiple virtual taxa using <code>memoria</code>’s experiment functions.
For methodological details, see:</p>
<blockquote>
<p>Benito, B.M., Gil-Romera, G. and Birks, H.J.B. (2020). <em>Ecological
memory at millennial time-scales: the importance of data constraints,
species longevity and niche features.</em> Ecography, 43: 1-10. <a href="https://doi.org/10.1111/ecog.04772" class="external-link">https://doi.org/10.1111/ecog.04772</a></p>
</blockquote>
</div>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://blasbenito.github.io/memoria/">memoria</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/BlasBenito/virtualPollen" class="external-link">virtualPollen</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-virtualpollen-package">The virtualPollen Package<a class="anchor" aria-label="anchor" href="#the-virtualpollen-package"></a>
</h2>
<p><code>virtualPollen</code> simulates pollen abundance curves using a
population dynamics model where virtual taxa have configurable traits
(life-span, fecundity, growth rate), environmental drivers influence
population dynamics through species-specific response functions, and
niche parameters define how each taxon responds to environmental
gradients.</p>
<p>Key trait parameters and their expected effects on memory:</p>
<table class="table">
<colgroup>
<col width="23%">
<col width="28%">
<col width="47%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Expected Memory Effect</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>maximum.age</code></td>
<td>Maximum lifespan of individuals</td>
<td>Longer life → extended endogenous memory</td>
</tr>
<tr class="even">
<td><code>fecundity</code></td>
<td>Number of offspring per reproductive event</td>
<td>Affects population recovery dynamics</td>
</tr>
<tr class="odd">
<td><code>niche.A.sd</code></td>
<td>Niche breadth (standard deviation)</td>
<td>Broader niche → weaker exogenous memory</td>
</tr>
<tr class="even">
<td><code>niche.A.mean</code></td>
<td>Niche optimum position</td>
<td>Determines driver response curve</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="understanding-the-data">Understanding the Data<a class="anchor" aria-label="anchor" href="#understanding-the-data"></a>
</h2>
<p>The <code>virtualPollen</code> package provides two example datasets:
<code>parameters</code> and <code>simulation</code>.</p>
<p>The <code><a href="https://rdrr.io/pkg/virtualPollen/man/parameters.html" class="external-link">virtualPollen::parameters</a></code> dataframe describes the
traits of the simulated species. Note the contrast between short-lived
(<code>maximum.age = 10</code>) and long-lived
(<code>maximum.age = 1000</code>) taxa, and between high
(<code>fecundity = 10</code>) and low (<code>fecundity = 1</code>)
fecundity.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">parameters</span>, package <span class="op">=</span> <span class="st">"virtualPollen"</span><span class="op">)</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">parameters</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 4</span></span>
<span><span class="co">#&gt; Columns: 16</span></span>
<span><span class="co">#&gt; $ label                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "S10A50-5_f10"<span style="color: #949494;">, </span>"S1000A50-5_f10"<span style="color: #949494;">, </span>"S10A50-5_f…</span></span>
<span><span class="co">#&gt; $ maximum.age              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10<span style="color: #949494;">, </span>1000<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>1000</span></span>
<span><span class="co">#&gt; $ reproductive.age         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 4<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>100</span></span>
<span><span class="co">#&gt; $ fecundity                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1</span></span>
<span><span class="co">#&gt; $ growth.rate              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.50<span style="color: #949494;">, </span>0.01<span style="color: #949494;">, </span>1.50<span style="color: #949494;">, </span>0.01</span></span>
<span><span class="co">#&gt; $ pollen.control           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0</span></span>
<span><span class="co">#&gt; $ maximum.biomass          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 100<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>100</span></span>
<span><span class="co">#&gt; $ carrying.capacity        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10000<span style="color: #949494;">, </span>10000<span style="color: #949494;">, </span>10000<span style="color: #949494;">, </span>10000</span></span>
<span><span class="co">#&gt; $ driver.A.weight          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1</span></span>
<span><span class="co">#&gt; $ driver.B.weight          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0</span></span>
<span><span class="co">#&gt; $ niche.A.mean             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50</span></span>
<span><span class="co">#&gt; $ niche.A.sd               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10</span></span>
<span><span class="co">#&gt; $ niche.B.mean             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50</span></span>
<span><span class="co">#&gt; $ niche.B.sd               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5</span></span>
<span><span class="co">#&gt; $ autocorrelation.length.A <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600</span></span>
<span><span class="co">#&gt; $ autocorrelation.length.B <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600</span></span></code></pre></div>
<p>The <code><a href="https://rdrr.io/pkg/virtualPollen/man/simulation.html" class="external-link">virtualPollen::simulation</a></code> dataset is a list
containing simulated populations generated by
<code><a href="https://rdrr.io/pkg/virtualPollen/man/simulatePopulation.html" class="external-link">virtualPollen::simulatePopulation()</a></code> using
<code>parameters</code> as input.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">simulation</span>, package <span class="op">=</span> <span class="st">"virtualPollen"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">simulation</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ S10A50-5_f10  :'data.frame':  5000 obs. of  14 variables:</span></span>
<span><span class="co">#&gt;  $ S1000A50-5_f10:'data.frame':  5000 obs. of  14 variables:</span></span>
<span><span class="co">#&gt;  $ S10A50-5_f1   :'data.frame':  5000 obs. of  14 variables:</span></span>
<span><span class="co">#&gt;  $ S1000A50-5_f1 :'data.frame':  5000 obs. of  14 variables:</span></span></code></pre></div>
<p>Each element is a dataframe with the results of a mechanistic
simulation. The plot below shows a small section and subset of variables
from the first simulated time series.</p>
<p><img src="memoria_and_virtualPollen_files/figure-html/unnamed-chunk-1-1.png" class="r-plt" alt="" width="100%"></p>
</div>
<div class="section level2">
<h2 id="batch-memory-analysis-with-memoriarunexperiment">Batch Memory Analysis with
<code>memoria::runExperiment()</code><a class="anchor" aria-label="anchor" href="#batch-memory-analysis-with-memoriarunexperiment"></a>
</h2>
<p>The <code><a href="../reference/runExperiment.html">runExperiment()</a></code> function applies the full
<code>memoria</code> workflow across multiple virtual taxa and sampling
resolutions:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">experiment</span> <span class="op">&lt;-</span> <span class="fu">memoria</span><span class="fu">::</span><span class="fu"><a href="../reference/runExperiment.html">runExperiment</a></span><span class="op">(</span></span>
<span>  simulations.file <span class="op">=</span> <span class="va">simulation</span>,</span>
<span>  parameters.file <span class="op">=</span> <span class="va">parameters</span>,</span>
<span>  parameters.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"maximum.age"</span>,</span>
<span>    <span class="st">"fecundity"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  driver.column <span class="op">=</span> <span class="st">"Driver.A"</span>,</span>
<span>  response.column <span class="op">=</span> <span class="st">"Pollen"</span>,</span>
<span>  time.column <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  lags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">120</span>, by <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>  repetitions <span class="op">=</span> <span class="fl">30</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="visualizing-results-with-plotexperiment">Visualizing Results with plotExperiment()<a class="anchor" aria-label="anchor" href="#visualizing-results-with-plotexperiment"></a>
</h2>
<p>The <code><a href="../reference/plotExperiment.html">plotExperiment()</a></code> function generates faceted plots
showing memory patterns across all analyzed taxa:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">memoria</span><span class="fu">::</span><span class="fu"><a href="../reference/plotExperiment.html">plotExperiment</a></span><span class="op">(</span></span>
<span>  experiment.output <span class="op">=</span> <span class="va">experiment</span>,</span>
<span>  parameters.file <span class="op">=</span> <span class="va">parameters</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="memoria_and_virtualPollen_files/figure-html/plot-experiment-1.png" class="r-plt" alt="" width="100%"></p>
<p>Interpreting the plot:</p>
<ul>
<li>
<strong>Lines</strong>: Median importance across repetitions.</li>
<li>
<strong>Ribbons</strong>: 5th-95th percentile confidence
intervals.</li>
<li>
<strong>Facets</strong>: Each panel shows a different taxon with its
trait values.</li>
<li>
<strong>Colors</strong>: Different memory components (response =
endogenous, driver = exogenous, random = significance baseline).</li>
<li>
<strong>R2 values</strong>: Model fit (pseudo R-squared from Random
Forest).</li>
</ul>
<p>When importance exceeds the random baseline, that memory component
explains variation in pollen abundance better than chance.</p>
</div>
<div class="section level2">
<h2 id="converting-to-table-format">Converting to Table Format<a class="anchor" aria-label="anchor" href="#converting-to-table-format"></a>
</h2>
<p>The <code><a href="../reference/experimentToTable.html">experimentToTable()</a></code> function reshapes experiment
results into a long-format dataframe for further analysis:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">experiment_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/experimentToTable.html">experimentToTable</a></span><span class="op">(</span></span>
<span>  experiment.output <span class="op">=</span> <span class="va">experiment</span>,</span>
<span>  parameters.file <span class="op">=</span> <span class="fu">virtualPollen</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/virtualPollen/man/parameters.html" class="external-link">parameters</a></span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">experiment_table</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 152</span></span>
<span><span class="co">#&gt; Columns: 25</span></span>
<span><span class="co">#&gt; $ median                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 42.43117<span style="color: #949494;">, </span>18.77682<span style="color: #949494;">, </span>13.50895<span style="color: #949494;">, </span>11.55201<span style="color: #949494;">, </span>10.88…</span></span>
<span><span class="co">#&gt; $ sd                       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0158766<span style="color: #949494;">, </span>0.6630606<span style="color: #949494;">, </span>0.7150361<span style="color: #949494;">, </span>0.7762626<span style="color: #949494;">, </span>1…</span></span>
<span><span class="co">#&gt; $ min                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 40.455338<span style="color: #949494;">, </span>17.560109<span style="color: #949494;">, </span>12.484472<span style="color: #949494;">, </span>10.463731<span style="color: #949494;">, </span>9…</span></span>
<span><span class="co">#&gt; $ max                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 44.07475<span style="color: #949494;">, </span>19.33819<span style="color: #949494;">, </span>14.63643<span style="color: #949494;">, </span>12.67534<span style="color: #949494;">, </span>12.78…</span></span>
<span><span class="co">#&gt; $ variable                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Pollen<span style="color: #949494;">, </span>Pollen<span style="color: #949494;">, </span>Pollen<span style="color: #949494;">, </span>Pollen<span style="color: #949494;">, </span>Pollen<span style="color: #949494;">, </span>Polle…</span></span>
<span><span class="co">#&gt; $ lag                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10<span style="color: #949494;">, </span>20<span style="color: #949494;">, </span>30<span style="color: #949494;">, </span>40<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>60<span style="color: #949494;">, </span>70<span style="color: #949494;">, </span>80<span style="color: #949494;">, </span>90<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>110<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ name                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "ma 10; f 10; R2 0.9sd 0"<span style="color: #949494;">, </span>"ma 10; f 10; R2 0…</span></span>
<span><span class="co">#&gt; $ R2mean                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.9797754<span style="color: #949494;">, </span>0.9797754<span style="color: #949494;">, </span>0.9797754<span style="color: #949494;">, </span>0.9797754<span style="color: #949494;">, </span>0…</span></span>
<span><span class="co">#&gt; $ R2sd                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.00010613<span style="color: #949494;">, </span>0.00010613<span style="color: #949494;">, </span>0.00010613<span style="color: #949494;">, </span>0.0001061…</span></span>
<span><span class="co">#&gt; $ label                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "S10A50-5_f10"<span style="color: #949494;">, </span>"S10A50-5_f10"<span style="color: #949494;">, </span>"S10A50-5_f10…</span></span>
<span><span class="co">#&gt; $ maximum.age              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>1…</span></span>
<span><span class="co">#&gt; $ reproductive.age         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ fecundity                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>1…</span></span>
<span><span class="co">#&gt; $ growth.rate              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.5<span style="color: #949494;">, </span>1.5<span style="color: #949494;">, </span>1.5<span style="color: #949494;">, </span>1.5<span style="color: #949494;">, </span>1.5<span style="color: #949494;">, </span>1.5<span style="color: #949494;">, </span>1.5<span style="color: #949494;">, </span>1.5<span style="color: #949494;">, </span>1.5<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ pollen.control           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ maximum.biomass          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 100<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ carrying.capacity        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10000<span style="color: #949494;">, </span>10000<span style="color: #949494;">, </span>10000<span style="color: #949494;">, </span>10000<span style="color: #949494;">, </span>10000<span style="color: #949494;">, </span>10000<span style="color: #949494;">, </span>100…</span></span>
<span><span class="co">#&gt; $ driver.A.weight          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ driver.B.weight          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ niche.A.mean             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>5…</span></span>
<span><span class="co">#&gt; $ niche.A.sd               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>1…</span></span>
<span><span class="co">#&gt; $ niche.B.mean             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>5…</span></span>
<span><span class="co">#&gt; $ niche.B.sd               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ autocorrelation.length.A <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ autocorrelation.length.B <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>600<span style="color: #949494;">, </span>…</span></span></code></pre></div>
<p>The output includes:</p>
<ul>
<li>
<strong>Variable</strong>, <strong>Lag</strong>: Memory component
and time lag.</li>
<li>
<strong>median</strong>, <strong>min</strong>, <strong>max</strong>:
Importance statistics across repetitions.</li>
<li>
<strong>R2mean</strong>, <strong>R2sd</strong>: Model fit
statistics.</li>
</ul>
</div>
<div class="section level2">
<h2 id="extracting-memory-features">Extracting Memory Features<a class="anchor" aria-label="anchor" href="#extracting-memory-features"></a>
</h2>
<p>The <code><a href="../reference/extractMemoryFeatures.html">extractMemoryFeatures()</a></code> function can process output
from <code><a href="../reference/experimentToTable.html">experimentToTable()</a></code> to compute the eight memory
features for each taxon:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">features</span> <span class="op">&lt;-</span> <span class="fu">memoria</span><span class="fu">::</span><span class="fu"><a href="../reference/extractMemoryFeatures.html">extractMemoryFeatures</a></span><span class="op">(</span></span>
<span>  memory.pattern <span class="op">=</span> <span class="va">experiment_table</span>,</span>
<span>  exogenous.component <span class="op">=</span> <span class="st">"Driver.A"</span>,</span>
<span>  endogenous.component <span class="op">=</span> <span class="st">"Pollen"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">features</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 4</span></span>
<span><span class="co">#&gt; Columns: 12</span></span>
<span><span class="co">#&gt; $ label                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "S10A50-5_f10"<span style="color: #949494;">, </span>"S1000A50-5_f10"<span style="color: #949494;">, </span>"S10A50-5_f1"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ strength.endogenous  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000<span style="color: #949494;">, </span>0.2075139<span style="color: #949494;">, </span>0.5378882<span style="color: #949494;">, </span>0.4891335</span></span>
<span><span class="co">#&gt; $ strength.exogenous   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.96585579<span style="color: #949494;">, </span>0.00000000<span style="color: #949494;">, </span>1.00000000<span style="color: #949494;">, </span>0.02699637</span></span>
<span><span class="co">#&gt; $ strength.concurrent  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.9544150<span style="color: #949494;">, </span>0.5498155<span style="color: #949494;">, </span>0.8813975<span style="color: #949494;">, </span>1.0000000</span></span>
<span><span class="co">#&gt; $ length.endogenous    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.08333333<span style="color: #949494;">, </span>0.08333333<span style="color: #949494;">, </span>0.08333333<span style="color: #949494;">, </span>0.08333333</span></span>
<span><span class="co">#&gt; $ length.exogenous     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.08333333<span style="color: #949494;">, </span>0.00000000<span style="color: #949494;">, </span>0.08333333<span style="color: #949494;">, </span>0.08333333</span></span>
<span><span class="co">#&gt; $ dominance.endogenous <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.08333333<span style="color: #949494;">, </span>0.08333333<span style="color: #949494;">, </span>0.08333333<span style="color: #949494;">, </span>0.08333333</span></span>
<span><span class="co">#&gt; $ dominance.exogenous  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0</span></span>
<span><span class="co">#&gt; $ maximum.age          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10<span style="color: #949494;">, </span>1000<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>1000</span></span>
<span><span class="co">#&gt; $ fecundity            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1</span></span>
<span><span class="co">#&gt; $ niche.mean           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50<span style="color: #949494;">, </span>50</span></span>
<span><span class="co">#&gt; $ niche.sd             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10</span></span></code></pre></div>
<p>The eight features (organized in three groups):</p>
<p><strong>Strength</strong> (scaled 0-1): Peak importance relative to
random baseline.</p>
<ul>
<li>
<code>strength.endogenous</code>: How strongly past pollen predicts
current pollen.</li>
<li>
<code>strength.exogenous</code>: How strongly past environment
predicts current pollen.</li>
<li>
<code>strength.concurrent</code>: How strongly current environment
predicts current pollen.</li>
</ul>
<p><strong>Length</strong> (proportion 0-1): How far into the past
memory extends above baseline.</p>
<ul>
<li>
<code>length.endogenous</code>: Temporal extent of significant
endogenous memory.</li>
<li>
<code>length.exogenous</code>: Temporal extent of significant
exogenous memory.</li>
</ul>
<p><strong>Dominance</strong> (proportion 0-1): Which component prevails
across significant lags.</p>
<ul>
<li>
<code>dominance.endogenous</code>: Proportion of lags where
endogenous &gt; exogenous.</li>
<li>
<code>dominance.exogenous</code>: Proportion of lags where exogenous
&gt; endogenous.</li>
</ul>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>The integration of virtualPollen and memoria enables systematic
exploration of ecological memory:</p>
<ol style="list-style-type: decimal">
<li>
<strong>virtualPollen</strong> generates synthetic pollen curves
with known trait parameters.</li>
<li>
<strong><code><a href="../reference/runExperiment.html">runExperiment()</a></code></strong> applies the memoria
workflow across multiple taxa/resolutions.</li>
<li>
<strong><code><a href="../reference/plotExperiment.html">plotExperiment()</a></code></strong> visualizes memory
patterns in faceted plots.</li>
<li>
<strong><code><a href="../reference/experimentToTable.html">experimentToTable()</a></code></strong> converts results
to analyzable long format.</li>
<li>
<strong><code><a href="../reference/extractMemoryFeatures.html">extractMemoryFeatures()</a></code></strong> quantifies the
eight memory features.</li>
</ol>
<p>This framework revealed that <strong>life-span and niche features
fundamentally shape ecological memory patterns</strong>, with important
implications for interpreting palaeoecological records and climate
reconstructions.</p>
<p>For complete methodological details and extended analysis, see:</p>
<blockquote>
<p>Benito, B.M., Gil-Romera, G. and Birks, H.J.B. (2020). Ecological
memory at millennial time-scales: the importance of data constraints,
species longevity and niche features. Ecography, 43: 1-10. <a href="https://doi.org/10.1111/ecog.04772" class="external-link">https://doi.org/10.1111/ecog.04772</a></p>
</blockquote>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://blasbenito.com" class="external-link">Blas M. Benito</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
