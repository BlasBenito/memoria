<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quantifying Ecological Memory in Palaeoecological Datasets and Other Long Time-Series • memoria</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Quantifying Ecological Memory in Palaeoecological Datasets and Other Long Time-Series">
<meta name="description" content="Quantifies ecological memory in long time-series using Random Forest models (Benito, Gil-Romera, and Birks 2019 &lt;doi:10.1111/ecog.04772&gt;) fitted with ranger (Wright and Ziegler 2017 &lt;doi:10.18637/jss.v077.i01&gt;). Ecological memory is assessed by modeling a response variable as a function of lagged predictors, distinguishing endogenous memory (lagged response) from exogenous memory (lagged environmental drivers). Designed for palaeoecological datasets and simulated pollen curves from virtualPollen, but applicable to any long time-series with environmental drivers and a biotic response.">
<meta property="og:description" content="Quantifies ecological memory in long time-series using Random Forest models (Benito, Gil-Romera, and Birks 2019 &lt;doi:10.1111/ecog.04772&gt;) fitted with ranger (Wright and Ziegler 2017 &lt;doi:10.18637/jss.v077.i01&gt;). Ecological memory is assessed by modeling a response variable as a function of lagged predictors, distinguishing endogenous memory (lagged response) from exogenous memory (lagged environmental drivers). Designed for palaeoecological datasets and simulated pollen curves from virtualPollen, but applicable to any long time-series with environmental drivers and a biotic response.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">memoria</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="memoria">memoria<a class="anchor" aria-label="anchor" href="#memoria"></a>
</h1></div>
<!-- badges: start -->

<p>The <strong>memoria</strong> package quantifies ecological memory in long time-series involving environmental drivers and biotic responses. It uses Random Forest models to measure the relative importance of endogenous memory (effect of past response values), exogenous memory (effect of past driver values), and concurrent effects (synchronic driver influence).</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"memoria"</span><span class="op">)</span></span></code></pre></div>
<p>Or the development version from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"BlasBenito/memoria"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-example">Quick Example<a class="anchor" aria-label="anchor" href="#quick-example"></a>
</h2>
<p>This minimal example uses built-in data to demonstrate the core workflow.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://blasbenito.github.io/memoria/">memoria</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://blasbenito.github.io/distantia/" class="external-link">distantia</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="example-data">Example Data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h3>
<p>The <code>palaeodata</code> dataset contains is a palaeoecological dataset with pollen counts (non-integer because the data was interpolated to a regular grid, see <code><a href="reference/mergePalaeoData.html">mergePalaeoData()</a></code>) for several taxa and several climate variables.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">palaeodata</span><span class="op">)</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">palaeodata</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 3,993</span></span>
<span><span class="co">#&gt; Columns: 10</span></span>
<span><span class="co">#&gt; $ age                             &lt;dbl&gt; 0.5, 0.7, 0.9, 1.1, 1.3, 1.5, 1.7, 1.9…</span></span>
<span><span class="co">#&gt; $ pollen.pinus                    &lt;dbl&gt; 0.000000, 2.504311, 6.970560, 10.64129…</span></span>
<span><span class="co">#&gt; $ pollen.quercus                  &lt;dbl&gt; 95.58695, 109.43764, 120.11562, 127.74…</span></span>
<span><span class="co">#&gt; $ pollen.poaceae                  &lt;dbl&gt; 0.000000, 9.548974, 16.791644, 21.7550…</span></span>
<span><span class="co">#&gt; $ pollen.artemisia                &lt;dbl&gt; 0.0000000, 0.0000000, 0.6724734, 1.696…</span></span>
<span><span class="co">#&gt; $ climate.temperatureAverage      &lt;dbl&gt; 14.08241, 14.06364, 14.04636, 14.03058…</span></span>
<span><span class="co">#&gt; $ climate.rainfallAverage         &lt;dbl&gt; 1.570000, 1.570000, 1.570000, 1.570000…</span></span>
<span><span class="co">#&gt; $ climate.temperatureWarmestMonth &lt;dbl&gt; 21.04644, 21.25322, 21.45470, 21.65086…</span></span>
<span><span class="co">#&gt; $ climate.temperatureColdestMonth &lt;dbl&gt; 5.249096, 5.240348, 5.229598, 5.216903…</span></span>
<span><span class="co">#&gt; $ climate.oxigenIsotope           &lt;dbl&gt; 3.425792, 3.428361, 3.431511, 3.435238…</span></span></code></pre></div>
<p>For this example we select one of the plant species and two climate variables.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#subset variables of interest</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">palaeodata</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span></span>
<span>    pinus <span class="op">=</span> <span class="va">pollen.pinus</span>,</span>
<span>    temperature <span class="op">=</span> <span class="va">climate.temperatureAverage</span>,</span>
<span>    rain <span class="op">=</span> <span class="va">climate.rainfallAverage</span>,</span>
<span>    time <span class="op">=</span> <span class="va">age</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co">#time series plot</span></span>
<span><span class="va">df</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu">distantia</span><span class="fu">::</span><span class="fu">tsl_init</span><span class="op">(</span></span>
<span>  time_column <span class="op">=</span> <span class="st">"time"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">distantia</span><span class="fu">::</span><span class="fu">tsl_plot</span><span class="op">(</span></span>
<span>    ylim <span class="op">=</span> <span class="st">"relative"</span>,</span>
<span>    guide <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-5-1.png" alt="" width="100%"> Notice that in the plot above, time, in thousands of years before present, goes from right (oldest) to left (newest).</p>
<p>The next step requires building a lagged version of the data, in which each value of the response and the predictors (drivers) is matched with previous values.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#lag in ka</span></span>
<span><span class="co">#"by" must match the resolution of df</span></span>
<span><span class="va">lags</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.2</span>, to <span class="op">=</span> <span class="fl">5</span>, by <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_lags</span> <span class="op">&lt;-</span> <span class="fu">memoria</span><span class="fu">::</span><span class="fu"><a href="reference/prepareLaggedData.html">prepareLaggedData</a></span><span class="op">(</span></span>
<span>  input.data <span class="op">=</span> <span class="va">df</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"pinus"</span>,</span>
<span>  drivers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"temperature"</span>, </span>
<span>    <span class="st">"rain"</span></span>
<span>    <span class="op">)</span>,</span>
<span>  time <span class="op">=</span> <span class="st">"time"</span>,</span>
<span>  oldest.sample <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>  lags <span class="op">=</span> <span class="va">lags</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">df_lags</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 3,968</span></span>
<span><span class="co">#&gt; Columns: 79</span></span>
<span><span class="co">#&gt; $ pinus__0         &lt;dbl&gt; 0.000000, 2.504311, 6.970560, 10.641292, 13.387639, 1…</span></span>
<span><span class="co">#&gt; $ pinus__0.2       &lt;dbl&gt; 2.504311, 6.970560, 10.641292, 13.387639, 15.023729, …</span></span>
<span><span class="co">#&gt; $ pinus__0.4       &lt;dbl&gt; 6.970560, 10.641292, 13.387639, 15.023729, 15.619855,…</span></span>
<span><span class="co">#&gt; $ pinus__0.6       &lt;dbl&gt; 10.6412923, 13.3876394, 15.0237290, 15.6198546, 14.51…</span></span>
<span><span class="co">#&gt; $ pinus__0.8       &lt;dbl&gt; 13.3876394, 15.0237290, 15.6198546, 14.5163833, 10.88…</span></span>
<span><span class="co">#&gt; $ pinus__1         &lt;dbl&gt; 15.0237290, 15.6198546, 14.5163833, 10.8839100, 5.995…</span></span>
<span><span class="co">#&gt; $ pinus__1.2       &lt;dbl&gt; 15.6198546, 14.5163833, 10.8839100, 5.9950859, 11.775…</span></span>
<span><span class="co">#&gt; $ pinus__1.4       &lt;dbl&gt; 14.5163833, 10.8839100, 5.9950859, 11.7753734, 15.743…</span></span>
<span><span class="co">#&gt; $ pinus__1.6       &lt;dbl&gt; 10.8839100, 5.9950859, 11.7753734, 15.7433291, 16.595…</span></span>
<span><span class="co">#&gt; $ pinus__1.8       &lt;dbl&gt; 5.9950859, 11.7753734, 15.7433291, 16.5953322, 17.491…</span></span>
<span><span class="co">#&gt; $ pinus__2         &lt;dbl&gt; 11.7753734, 15.7433291, 16.5953322, 17.4914659, 18.53…</span></span>
<span><span class="co">#&gt; $ pinus__2.2       &lt;dbl&gt; 15.7433291, 16.5953322, 17.4914659, 18.5317822, 21.75…</span></span>
<span><span class="co">#&gt; $ pinus__2.4       &lt;dbl&gt; 16.5953322, 17.4914659, 18.5317822, 21.7547684, 26.94…</span></span>
<span><span class="co">#&gt; $ pinus__2.6       &lt;dbl&gt; 17.4914659, 18.5317822, 21.7547684, 26.9425866, 21.94…</span></span>
<span><span class="co">#&gt; $ pinus__2.8       &lt;dbl&gt; 18.5317822, 21.7547684, 26.9425866, 21.9470415, 17.88…</span></span>
<span><span class="co">#&gt; $ pinus__3         &lt;dbl&gt; 21.7547684, 26.9425866, 21.9470415, 17.8845479, 18.24…</span></span>
<span><span class="co">#&gt; $ pinus__3.2       &lt;dbl&gt; 26.9425866, 21.9470415, 17.8845479, 18.2428705, 19.10…</span></span>
<span><span class="co">#&gt; $ pinus__3.4       &lt;dbl&gt; 21.9470415, 17.8845479, 18.2428705, 19.1090245, 21.62…</span></span>
<span><span class="co">#&gt; $ pinus__3.6       &lt;dbl&gt; 17.8845479, 18.2428705, 19.1090245, 21.6279072, 21.90…</span></span>
<span><span class="co">#&gt; $ pinus__3.8       &lt;dbl&gt; 18.2428705, 19.1090245, 21.6279072, 21.9079992, 21.36…</span></span>
<span><span class="co">#&gt; $ pinus__4         &lt;dbl&gt; 19.1090245, 21.6279072, 21.9079992, 21.3638099, 22.74…</span></span>
<span><span class="co">#&gt; $ pinus__4.2       &lt;dbl&gt; 21.6279072, 21.9079992, 21.3638099, 22.7459342, 22.24…</span></span>
<span><span class="co">#&gt; $ pinus__4.4       &lt;dbl&gt; 21.9079992, 21.3638099, 22.7459342, 22.2438480, 13.04…</span></span>
<span><span class="co">#&gt; $ pinus__4.6       &lt;dbl&gt; 21.3638099, 22.7459342, 22.2438480, 13.0423754, 6.967…</span></span>
<span><span class="co">#&gt; $ pinus__4.8       &lt;dbl&gt; 22.7459342, 22.2438480, 13.0423754, 6.9679862, 0.5656…</span></span>
<span><span class="co">#&gt; $ pinus__5         &lt;dbl&gt; 22.2438480, 13.0423754, 6.9679862, 0.5656565, 0.00000…</span></span>
<span><span class="co">#&gt; $ temperature__0   &lt;dbl&gt; 14.08241, 14.06364, 14.04636, 14.03058, 14.01631, 14.…</span></span>
<span><span class="co">#&gt; $ temperature__0.2 &lt;dbl&gt; 14.06364, 14.04636, 14.03058, 14.01631, 14.00359, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__0.4 &lt;dbl&gt; 14.04636, 14.03058, 14.01631, 14.00359, 13.99243, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__0.6 &lt;dbl&gt; 14.03058, 14.01631, 14.00359, 13.99243, 13.98284, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__0.8 &lt;dbl&gt; 14.01631, 14.00359, 13.99243, 13.98284, 13.97485, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__1   &lt;dbl&gt; 14.00359, 13.99243, 13.98284, 13.97485, 13.96844, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__1.2 &lt;dbl&gt; 13.99243, 13.98284, 13.97485, 13.96844, 13.96361, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__1.4 &lt;dbl&gt; 13.98284, 13.97485, 13.96844, 13.96361, 13.96034, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__1.6 &lt;dbl&gt; 13.97485, 13.96844, 13.96361, 13.96034, 13.95861, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__1.8 &lt;dbl&gt; 13.96844, 13.96361, 13.96034, 13.95861, 13.95838, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__2   &lt;dbl&gt; 13.96361, 13.96034, 13.95861, 13.95838, 13.95961, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__2.2 &lt;dbl&gt; 13.96034, 13.95861, 13.95838, 13.95961, 13.96222, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__2.4 &lt;dbl&gt; 13.95861, 13.95838, 13.95961, 13.96222, 13.96616, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__2.6 &lt;dbl&gt; 13.95838, 13.95961, 13.96222, 13.96616, 13.97136, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__2.8 &lt;dbl&gt; 13.95961, 13.96222, 13.96616, 13.97136, 13.97776, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__3   &lt;dbl&gt; 13.96222, 13.96616, 13.97136, 13.97776, 13.98544, 13.…</span></span>
<span><span class="co">#&gt; $ temperature__3.2 &lt;dbl&gt; 13.96616, 13.97136, 13.97776, 13.98544, 13.99476, 14.…</span></span>
<span><span class="co">#&gt; $ temperature__3.4 &lt;dbl&gt; 13.97136, 13.97776, 13.98544, 13.99476, 14.00663, 14.…</span></span>
<span><span class="co">#&gt; $ temperature__3.6 &lt;dbl&gt; 13.97776, 13.98544, 13.99476, 14.00663, 14.02234, 14.…</span></span>
<span><span class="co">#&gt; $ temperature__3.8 &lt;dbl&gt; 13.98544, 13.99476, 14.00663, 14.02234, 14.04206, 14.…</span></span>
<span><span class="co">#&gt; $ temperature__4   &lt;dbl&gt; 13.99476, 14.00663, 14.02234, 14.04206, 14.06052, 14.…</span></span>
<span><span class="co">#&gt; $ temperature__4.2 &lt;dbl&gt; 14.00663, 14.02234, 14.04206, 14.06052, 14.07484, 14.…</span></span>
<span><span class="co">#&gt; $ temperature__4.4 &lt;dbl&gt; 14.02234, 14.04206, 14.06052, 14.07484, 14.09563, 14.…</span></span>
<span><span class="co">#&gt; $ temperature__4.6 &lt;dbl&gt; 14.04206, 14.06052, 14.07484, 14.09563, 14.11849, 14.…</span></span>
<span><span class="co">#&gt; $ temperature__4.8 &lt;dbl&gt; 14.06052, 14.07484, 14.09563, 14.11849, 14.13328, 14.…</span></span>
<span><span class="co">#&gt; $ temperature__5   &lt;dbl&gt; 14.07484, 14.09563, 14.11849, 14.13328, 14.14602, 14.…</span></span>
<span><span class="co">#&gt; $ rain__0          &lt;dbl&gt; 1.570000, 1.570000, 1.570000, 1.570000, 1.570000, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__0.2        &lt;dbl&gt; 1.570000, 1.570000, 1.570000, 1.570000, 1.569424, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__0.4        &lt;dbl&gt; 1.570000, 1.570000, 1.570000, 1.569424, 1.568048, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__0.6        &lt;dbl&gt; 1.570000, 1.570000, 1.569424, 1.568048, 1.566565, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__0.8        &lt;dbl&gt; 1.570000, 1.569424, 1.568048, 1.566565, 1.564987, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__1          &lt;dbl&gt; 1.569424, 1.568048, 1.566565, 1.564987, 1.563325, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__1.2        &lt;dbl&gt; 1.568048, 1.566565, 1.564987, 1.563325, 1.561583, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__1.4        &lt;dbl&gt; 1.566565, 1.564987, 1.563325, 1.561583, 1.559766, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__1.6        &lt;dbl&gt; 1.564987, 1.563325, 1.561583, 1.559766, 1.557871, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__1.8        &lt;dbl&gt; 1.563325, 1.561583, 1.559766, 1.557871, 1.555890, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__2          &lt;dbl&gt; 1.561583, 1.559766, 1.557871, 1.555890, 1.553790, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__2.2        &lt;dbl&gt; 1.559766, 1.557871, 1.555890, 1.553790, 1.551496, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__2.4        &lt;dbl&gt; 1.557871, 1.555890, 1.553790, 1.551496, 1.548835, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__2.6        &lt;dbl&gt; 1.555890, 1.553790, 1.551496, 1.548835, 1.545830, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__2.8        &lt;dbl&gt; 1.553790, 1.551496, 1.548835, 1.545830, 1.543771, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__3          &lt;dbl&gt; 1.551496, 1.548835, 1.545830, 1.543771, 1.542352, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__3.2        &lt;dbl&gt; 1.548835, 1.545830, 1.543771, 1.542352, 1.540789, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__3.4        &lt;dbl&gt; 1.545830, 1.543771, 1.542352, 1.540789, 1.539005, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__3.6        &lt;dbl&gt; 1.543771, 1.542352, 1.540789, 1.539005, 1.537520, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__3.8        &lt;dbl&gt; 1.542352, 1.540789, 1.539005, 1.537520, 1.536191, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__4          &lt;dbl&gt; 1.540789, 1.539005, 1.537520, 1.536191, 1.534481, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__4.2        &lt;dbl&gt; 1.539005, 1.537520, 1.536191, 1.534481, 1.532796, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__4.4        &lt;dbl&gt; 1.537520, 1.536191, 1.534481, 1.532796, 1.531755, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__4.6        &lt;dbl&gt; 1.536191, 1.534481, 1.532796, 1.531755, 1.530777, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__4.8        &lt;dbl&gt; 1.534481, 1.532796, 1.531755, 1.530777, 1.529046, 1.5…</span></span>
<span><span class="co">#&gt; $ rain__5          &lt;dbl&gt; 1.532796, 1.531755, 1.530777, 1.529046, 1.526795, 1.5…</span></span>
<span><span class="co">#&gt; $ time             &lt;dbl&gt; 0.5, 0.7, 0.9, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.3, 2.5…</span></span></code></pre></div>
<p>Lets plot three of these lags to see how they look:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">distantia</span><span class="fu">::</span><span class="fu">zoo_plot</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu">zoo</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/zoo/man/zoo.html" class="external-link">zoo</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">df_lags</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pinus__0"</span>, <span class="st">"pinus__1"</span>, <span class="st">"pinus__2"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    order.by <span class="op">=</span> <span class="va">df_lags</span><span class="op">$</span><span class="va">time</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">]</span></span>
<span>  <span class="op">)</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Age (ka BP)"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-7-1.png" alt="" width="100%"></p>
</div>
<div class="section level3">
<h3 id="ecological-memory-analysis">Ecological Memory Analysis<a class="anchor" aria-label="anchor" href="#ecological-memory-analysis"></a>
</h3>
<p>The function <code><a href="reference/computeMemory.html">computeMemory()</a></code> trains Random Forest models with the lagged data, using “pinus_0” as response, all other variables as predictors, and a randomly generated variable for significance testing.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">memory</span> <span class="op">&lt;-</span> <span class="fu">memoria</span><span class="fu">::</span><span class="fu"><a href="reference/computeMemory.html">computeMemory</a></span><span class="op">(</span></span>
<span>  lagged.data <span class="op">=</span> <span class="va">df_lags</span>,</span>
<span>  repetitions <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  num.threads <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The output object is a list with the response, the drivers, the ecological memory analysis, the pseudo R-squared of the model predictions, and the prediction stats.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">memory</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "response"   "drivers"    "memory"     "R2"         "prediction"</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">memory</span><span class="op">$</span><span class="va">memory</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 103</span></span>
<span><span class="co">#&gt; Columns: 6</span></span>
<span><span class="co">#&gt; $ median   &lt;dbl&gt; 29.213878, 22.221188, 19.170626, 15.819255, 15.140499, 14.630…</span></span>
<span><span class="co">#&gt; $ sd       &lt;dbl&gt; 0.6814508, 0.7123891, 1.1075636, 1.2512961, 1.4491825, 1.2420…</span></span>
<span><span class="co">#&gt; $ min      &lt;dbl&gt; 28.366586, 21.271992, 18.080622, 14.537870, 12.931494, 12.003…</span></span>
<span><span class="co">#&gt; $ max      &lt;dbl&gt; 30.08005, 23.26677, 20.97056, 17.90699, 16.48366, 15.42053, 1…</span></span>
<span><span class="co">#&gt; $ variable &lt;fct&gt; pinus, pinus, pinus, pinus, pinus, pinus, pinus, pinus, pinus…</span></span>
<span><span class="co">#&gt; $ lag      &lt;dbl&gt; 0.2, 0.4, 0.6, 0.8, 1.0, 1.2, 1.4, 1.6, 1.8, 2.0, 2.2, 2.4, 2…</span></span></code></pre></div>
<p>The output of <code><a href="reference/computeMemory.html">computeMemory()</a></code> can be plotted with <code><a href="reference/plotMemory.html">plotMemory()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">memoria</span><span class="fu">::</span><span class="fu"><a href="reference/plotMemory.html">plotMemory</a></span><span class="op">(</span></span>
<span>  <span class="va">memory</span>, </span>
<span>  ribbon <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-10-1.png" alt="" width="100%"></p>
<p>The plot shows all ecological memory components of this dataset.</p>
<ul>
<li><p><strong>Endogenous memory</strong> (“pinus” curve): shows the importance of the past pollen abundance in predicting current pollen abundance. The plot shows this is the most important ecological memory component in this dataset.</p></li>
<li><p><strong>Significance test</strong> (“random” curve): shows the importance of 10 random autocorrelated variables to predict the response “pinus”. Helps to know when a given memory component explains the response better or worse than random.</p></li>
<li><p><strong>Concurrent effect</strong> (“temperature” and “rain” at lag 0): importance of the current driver values to predict the response. Both drivers are below the “random” curve, indicating that the concurrent effect is negligible in this dataset.</p></li>
<li><p><strong>Exogenouos memory</strong> (“temperature” and “rain” at lag &gt; 0): importance of the past driver values in explaining the current response values.</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="learn-more">Learn More<a class="anchor" aria-label="anchor" href="#learn-more"></a>
</h2>
<ul>
<li>
<strong><a href="https://blasbenito.github.io/memoria/articles/working_with_memoria.html">Working with memoria</a></strong>: Complete workflow from raw data to memory features</li>
<li>
<strong><a href="https://blasbenito.github.io/memoria/reference/index.html">Function Reference</a></strong>: Documentation for all exported functions</li>
</ul>
</div>
<div class="section level2">
<h2 id="how-to-cite-memoria">How to cite memoria<a class="anchor" aria-label="anchor" href="#how-to-cite-memoria"></a>
</h2>
<p>If you use <strong>memoria</strong> in your research, please cite both the package and the associated paper:</p>
<p><strong>Paper:</strong></p>
<blockquote>
<p>Benito, B.M., Gil-Romera, G., &amp; Birks, H.J.B. (2020). Ecological memory at millennial time-scales: the importance of data constraints, species longevity, and niche features. <em>Ecography</em>, 43(1), 1-10. doi: <a href="https://doi.org/10.1111/ecog.04772" class="external-link">10.1111/ecog.04772</a></p>
</blockquote>
<p><strong>R package:</strong></p>
<blockquote>
<p>Benito, B.M. (2025). memoria: Quantifying Ecological Memory in Palaeoecological Datasets and Other Long Time-Series. R package version 1.1.0. doi: <a href="https://doi.org/10.32614/CRAN.package.memoria" class="external-link">10.32614/CRAN.package.memoria</a></p>
</blockquote>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=memoria" class="external-link">View on CRAN</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 2)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing memoria</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Blas M. Benito <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0001-5105-7232" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=memoria" class="external-link"><img src="http://www.r-pkg.org/badges/version-ago/memoria" alt="CRAN_Release_Badge"></a></li>
<li><a href="https://CRAN.R-project.org/package=memoria" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/memoria" alt="CRAN_Download_Badge"></a></li>
<li><a href="https://github.com/blasbenito/memoria/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/blasbenito/memoria/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Blas M. Benito.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
